@model Estudiante.Models.Problema

<h2>@Model.Titulo</h2>
<p>@Model.Descripcion</p>

<form id="formCode">
    <div class="mb-3">
        <label for="lenguaje">Lenguaje</label>
        <select class="form-select" id="lenguaje" name="lenguaje">
            <option value="62">Java</option>
            <option value="71">Python</option>
            <option value="50">C</option>
            <option value="54">C++</option>
            <option value="63">JavaScript</option>
        </select>
    </div>

    <textarea id="codigo" name="codigo" class="form-control" rows="15" placeholder="Escribe tu código aquí..."></textarea>
    <button class="btn btn-primary mt-2" type="submit">Enviar</button>
</form>

<div id="resultado" class="mt-3"></div>

@section Scripts {
    <script>
        $("#formCode").submit(function (e) {
            e.preventDefault();
            $.post("/Problema/EvaluarCodigo", {
                id: @Model.Id,
                codigo: $("#codigo").val(),
                lenguaje: $("#lenguaje").val()
            }, function (data) {
                let html = "";
                data.resultados.forEach((r, i) => {
                    html += `<div class='alert alert-${r.correcto ? "success" : "danger"}'>
                        <strong>Caso ${i + 1}</strong><br>
                        Entrada: <pre>${r.entrada}</pre>
                        Salida esperada: <pre>${r.esperado}</pre>
                        Salida obtenida: <pre>${r.salida}</pre>
                        Error: <pre>${r.error}</pre>
                    </div>`;
                });
                $("#resultado").html(html);
            });
        });
    </script>
}

